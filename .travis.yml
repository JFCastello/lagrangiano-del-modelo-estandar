#https://github.com/SimonWaldherr/HowTo-Deploy-LaTeX-Documents -> .travis.yml
#=========================
#WARNING: Don't forget to create the DESCRIPTION FILE with contents:
#Imports:
#    rmarkdown
#=================

os: linux
sudo: required
warnings_are_errors: false

# we use the R VM because it contains LaTeX and pandoc
# https://docs.travis-ci.com/user/languages/r
#Requieres DESCRIPTION file

language: r

#LaTeX/TexLive Packages #
#The included TexLive distribution contains only a limited
#set of default packages. If your vignettes require additional
#TexLive packages you can install them using tlmgr install
#in the before_install step.

before_install:
  - tlmgr install chngcntr cancel babel-spanish

# we can install additional software
apt_packages:
# we download pdf2djvu to also generate a djvu f i l e of our LaTeX source
  - pdf2djvu

script:
# in the next step we use pdflatex to convert .tex to .pdf
# of course we could use pandoc for this also, but pdflatex generates nicer PDFs
  - pdflatex -interaction=nonstopmode fullnotes.tex
  - pdflatex -interaction=nonstopmode fullnotes.tex

#The following lines where automaticaly generated after
# cd into my local repo with the old version of .travis.yml
# install travis cli from: https://github.com/travis-ci/travis.rb
#  $ sudo apt-get install ruby2.1-dev
#  $ sudo gem install travis -v 1.8.2 --no-rdoc --no-ri
#  $ travis setup releases
# If failed login: remove Personal access token from github -> Settings
# Add:   skip_cleanup: true (see below)

deploy:
  provider: releases
  api_key:
    secure: DZ7mYeMtakweAPmwvF2jysEP8/i2PHyMgOwyvi2MRMBR6ZEB9MeSVNybTrwSRkB48w7XsbRvnRHjmnNqylmf604qgQ9RThrgW7Qi0PNBz6pGlw4JSV8bD5BId5f3gvRN7yYPUqieLI/7OeZ9UFfBT0R5aLR0oIz2NhkqhXGmRB8HPI4AIoRnYe0pGntB3gKhGMrxy5S3MeLvUFQCI3qmXk/dOaIepIwY48H/l6UUrM01yz8rIEVi1JcWqMEZY8SHpyGKuN8v4Ja9YzDVjv9wwwG0ujOBaF5yQ0A4TT+fZd9AznmmNP2qdQ185kTmfvNDiKwnvfZF6cm2MwNi/3kwiFWzqCzqrN6FzqzL1nD720iySjZ+U+ilaTLTYerx4I7ZyiakT1WbKh3XKmQJEsunwtMJgrLIFKnvk91PUIqSsuGBZCHaKbwkdXXvPoAiaiXMEQJBQ7mtoTQPZlDZ3EA9d0ybmyi2RVpwrDMvW9NzLPfHa+rOcJWbw8cXGXZL1Z3YG+G6PPAZvfpBS0bFSYZE7JhWnOMIgyhTHSj09YTNGjZwu1LN6OZdMwZhelOgLZ7KEBjJEwq4//3qmdZDZ4L8zJScCKp4ofu4W8EjQcPuwUzKsXMt+dXXXSQejLo/zhRNjFHCJVYzVOSdGMSEd5GkcGA04/yHXF46m4fFQKdL3Gc=
  file: fullnotes.pdf
  skip_cleanup: true
  on:
    repo: restrepo/TCC
